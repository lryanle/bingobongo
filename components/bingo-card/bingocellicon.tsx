const getTextColor = (hex: string) => {
  const threshold = 130;
  
  function cutHex(h: string) {return (h.charAt(0)=="#") ? h.substring(1,7):h}
  const cBrightness = ((parseInt((cutHex(hex)).substring(0,2),16) * 299) + (parseInt((cutHex(hex)).substring(2,4),16) * 587) + (parseInt((cutHex(hex)).substring(4,6),16) * 114)) / 1000;
  if (cBrightness > threshold) { return "black"; } else { return "white"; }	
}

const modifyColor = (color: string, percent: number) => {
  var num = parseInt(color.replace("#",""),16),
  amt = Math.round(2.55 * percent),
  R = (num >> 16) + amt,
  B = (num >> 8 & 0x00FF) + amt,
  G = (num & 0x0000FF) + amt;
  return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (B<255?B<1?0:B:255)*0x100 + (G<255?G<1?0:G:255)).toString(16).slice(1);
}

export const bingocellIcon = (type: "default" | "battleship" | "favorite" | "locked", color: string, number?: number): React.ReactElement => {
  if (type === "favorite") {
    return <svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.3799 7.32762C7.70572 7.28038 7.98741 7.0758 8.13313 6.78059L10.9861 1.00059L10.9864 1L10.9866 1.00046L13.8386 6.78046C13.9843 7.07569 14.266 7.28031 14.5918 7.3276L20.9699 8.25333L20.9527 8.27203L16.349 12.7523C16.1129 12.9821 16.0051 13.3134 16.0608 13.6382L17.1516 19.9917L17.1278 19.9807L11.4586 16.9933C11.1671 16.8397 10.8187 16.8395 10.5271 16.9928L4.82251 19.9921L4.82544 19.9673L5.91103 13.638C5.96671 13.3134 5.85895 12.9821 5.62293 12.7524L1.00149 8.25395L1.02802 8.24855L7.3799 7.32762Z" fill={color} stroke={modifyColor(color, -30)} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/></svg>
  }

  if (type === "locked") {
    return <svg viewBox="0 0 50 66" fill="none" xmlns="http://www.w3.org/2000/svg"> <g id="Vector"> <path d="M25 1C15.0286 1 7 9.15601 7 19.2857V22.3333C3.72081 22.3333 1 25.0973 1 28.4286V58.9048C1 62.236 3.72081 65 7 65H43C46.2792 65 49 62.236 49 58.9048V28.4286C49 25.0973 46.2792 22.3333 43 22.3333V19.2857C43 9.15601 34.9714 1 25 1ZM25 7.09524C31.8286 7.09524 37 12.3488 37 19.2857V22.3333H13V19.2857C13 12.3488 18.1714 7.09524 25 7.09524ZM7 28.4286H43V58.9048H7V28.4286ZM25 37.5714C21.7 37.5714 19 40.3143 19 43.6667C19 47.019 21.7 49.7619 25 49.7619C28.3 49.7619 31 47.019 31 43.6667C31 40.3143 28.3 37.5714 25 37.5714Z" fill={color} fillOpacity="0.5"/> <path d="M25 0.875C14.9577 0.875 6.875 9.08884 6.875 19.2857V22.2096C3.58118 22.2788 0.875 25.0725 0.875 28.4286V58.9048C0.875 62.3032 3.64993 65.125 7 65.125H43C46.3501 65.125 49.125 62.3032 49.125 58.9048V28.4286C49.125 25.0725 46.4188 22.2788 43.125 22.2096V19.2857C43.125 9.08884 35.0423 0.875 25 0.875ZM25 7.22024C31.7577 7.22024 36.875 12.4159 36.875 19.2857V22.2083H13.125V19.2857C13.125 12.4159 18.2423 7.22024 25 7.22024ZM42.875 28.5536V58.7798H7.125V28.5536H42.875ZM25 37.4464C21.6291 37.4464 18.875 40.2471 18.875 43.6667C18.875 47.0862 21.6291 49.8869 25 49.8869C28.3709 49.8869 31.125 47.0862 31.125 43.6667C31.125 40.2471 28.3709 37.4464 25 37.4464Z" stroke={color} strokeOpacity="0.5" strokeWidth="0.25"/> </g> </svg>;
  }
  
  if (type === "battleship") {
    if (number === 2) return (<svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.66667 16.2857V18H2.5C2.93056 18 3.35417 17.9464 3.77083 17.8393C4.1875 17.7321 4.59722 17.5714 5 17.3571C5.40278 17.5714 5.8125 17.7321 6.22917 17.8393C6.64583 17.9464 7.06944 18 7.5 18C7.93056 18 8.35417 17.9464 8.77083 17.8393C9.1875 17.7321 9.59722 17.5714 10 17.3571C10.4028 17.5714 10.8125 17.7321 11.2292 17.8393C11.6458 17.9464 12.0694 18 12.5 18C12.9306 18 13.3542 17.9464 13.7708 17.8393C14.1875 17.7321 14.5972 17.5714 15 17.3571C15.4028 17.5714 15.8125 17.7321 16.2292 17.8393C16.6458 17.9464 17.0694 18 17.5 18H18.3333V16.2857H17.5C17.0556 16.2857 16.6215 16.2143 16.1979 16.0714C15.7743 15.9286 15.375 15.7143 15 15.4286C14.625 15.7143 14.2257 15.9286 13.8021 16.0714C13.3785 16.2143 12.9444 16.2857 12.5 16.2857C12.0556 16.2857 11.625 16.2143 11.2083 16.0714C10.7917 15.9286 10.3889 15.7143 10 15.4286C9.625 15.7143 9.22569 15.9286 8.80208 16.0714C8.37847 16.2143 7.94444 16.2857 7.5 16.2857C7.05555 16.2857 6.625 16.2143 6.20833 16.0714C5.79167 15.9286 5.38889 15.7143 5 15.4286C4.61111 15.7143 4.20833 15.9286 3.79167 16.0714C3.375 16.2143 2.94444 16.2857 2.5 16.2857H1.66667Z" fill={color}/> <path d="M6.10417 14.2071C6.53472 14.45 7 14.5714 7.5 14.5714C8 14.5714 8.46528 14.45 8.89583 14.2071C9.32639 13.9643 9.69444 13.6571 10 13.2857C10.3056 13.6571 10.6736 13.9643 11.1042 14.2071C11.5347 14.45 12 14.5714 12.5 14.5714C13 14.5714 13.4653 14.45 13.8958 14.2071C14.3264 13.9643 14.6944 13.6571 15 13.2857C15.2361 13.5571 15.4965 13.7964 15.7812 14.0036C16.066 14.2107 16.3819 14.3643 16.7292 14.4643C17.2708 14.3071 17.8507 14.1179 18.4688 13.8964C19.0868 13.675 19.5972 13.4714 20 13.2857C19.25 12.9286 18.2257 12.5571 16.9271 12.1714C15.6285 11.7857 14.3333 11.5143 13.0417 11.3571L16.125 4.2L17.2292 3.77143L18.3333 1.22143L15.6667 0L14.5625 2.55L14.9792 3.68571L13.6042 6.85712L12.5208 9.38569L11.7292 11.2071C11.4514 11.1785 11.1667 11.1607 10.875 11.1536C10.5833 11.1464 10.2917 11.1429 10 11.1429H9.20833C7.68859 11.2538 6.99614 11.3369 5.9375 11.5071C4.89583 11.6785 3.83333 11.9357 2.75 12.2786C1.66667 12.6214 0.75 12.9571 0 13.2857C0.444444 13.4857 0.958333 13.6929 1.54167 13.9071C2.125 14.1214 2.70139 14.3071 3.27083 14.4643C3.61806 14.35 3.93403 14.1893 4.21875 13.9821C4.50347 13.775 4.76389 13.5429 5 13.2857C5.30556 13.6571 5.67361 13.9643 6.10417 14.2071Z" fill={color}/> <path d="M4.16666 6.71429V10.2857H10.8333V8.14287H6.38888V6.71429H9.35184C9.77159 6.71429 10.1234 6.57739 10.4074 6.30358C10.6913 6.02977 10.8333 5.69048 10.8333 5.28572V3.14287C10.8333 2.7381 10.6913 2.39882 10.4074 2.12501C10.1234 1.8512 9.77159 1.71429 9.35184 1.71429H4.16666V3.85715H8.6111V5.28572H5.64814C5.22838 5.28572 4.87653 5.42263 4.59258 5.69644C4.30863 5.97025 4.16666 6.30953 4.16666 6.71429Z" fill={color}/> </svg>);
    if (number === 3) return (<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M10.45 11.3636C10.63 10.9394 10.825 10.197 11.035 9.13636C11.245 8.07576 11.35 7 11.35 5.90909C11.35 4.81818 11.2487 3.69697 11.0463 2.54545C10.8438 1.39394 10.645 0.545455 10.45 0C11.365 0.272727 12.2762 0.780303 13.1838 1.52273C14.0913 2.26515 14.9088 3.15152 15.6363 4.18182C16.3638 5.21212 16.9563 6.3447 17.4137 7.57955C17.8713 8.81439 18.1 10.0758 18.1 11.3636H10.45ZM12.79 9.54545H16.12C15.865 8.37879 15.4487 7.31061 14.8713 6.34091C14.2937 5.37121 13.6825 4.54545 13.0375 3.86364C13.0675 4.18182 13.0938 4.51136 13.1163 4.85227C13.1388 5.19318 13.15 5.54545 13.15 5.90909C13.15 6.62121 13.1162 7.2803 13.0487 7.88636C12.9812 8.49242 12.895 9.04545 12.79 9.54545ZM7.3 16.3636C6.76 16.3636 6.2575 16.2348 5.7925 15.9773C5.3275 15.7197 4.93 15.3939 4.6 15C4.39 15.2273 4.16125 15.4394 3.91375 15.6364C3.66625 15.8333 3.3925 15.9924 3.0925 16.1136C2.5675 15.7197 2.12125 15.2311 1.75375 14.6477C1.38625 14.0644 1.135 13.4242 1 12.7273H19C18.865 13.4242 18.6138 14.0644 18.2463 14.6477C17.8787 15.2311 17.4325 15.7197 16.9075 16.1136C16.6075 15.9924 16.3338 15.8333 16.0863 15.6364C15.8387 15.4394 15.61 15.2273 15.4 15C15.055 15.3939 14.6538 15.7197 14.1962 15.9773C13.7387 16.2348 13.24 16.3636 12.7 16.3636C12.16 16.3636 11.6575 16.2348 11.1925 15.9773C10.7275 15.7197 10.33 15.3939 10 15C9.67 15.3939 9.2725 15.7197 8.8075 15.9773C8.3425 16.2348 7.84 16.3636 7.3 16.3636ZM1 20V18.1818H1.9C2.38 18.1818 2.84875 18.1061 3.30625 17.9545C3.76375 17.803 4.195 17.5758 4.6 17.2727C5.005 17.5758 5.43625 17.7992 5.89375 17.9432C6.35125 18.0871 6.82 18.1591 7.3 18.1591C7.78 18.1591 8.245 18.0871 8.695 17.9432C9.145 17.7992 9.58 17.5758 10 17.2727C10.405 17.5758 10.8362 17.7992 11.2937 17.9432C11.7512 18.0871 12.22 18.1591 12.7 18.1591C13.18 18.1591 13.645 18.0871 14.095 17.9432C14.545 17.7992 14.98 17.5758 15.4 17.2727C15.82 17.5758 16.255 17.803 16.705 17.9545C17.155 18.1061 17.62 18.1818 18.1 18.1818H19V20H18.1C17.635 20 17.1775 19.9432 16.7275 19.8295C16.2775 19.7159 15.835 19.5455 15.4 19.3182C14.965 19.5455 14.5225 19.7159 14.0725 19.8295C13.6225 19.9432 13.165 20 12.7 20C12.235 20 11.7775 19.9432 11.3275 19.8295C10.8775 19.7159 10.435 19.5455 10 19.3182C9.565 19.5455 9.1225 19.7159 8.6725 19.8295C8.2225 19.9432 7.765 20 7.3 20C6.835 20 6.3775 19.9432 5.9275 19.8295C5.4775 19.7159 5.035 19.5455 4.6 19.3182C4.165 19.5455 3.7225 19.7159 3.2725 19.8295C2.8225 19.9432 2.365 20 1.9 20H1Z" fill={color}/> <path d="M1.89999 8.63636V10.9091H7.49999C7.95333 10.9091 8.33333 10.7639 8.63999 10.4735C8.94666 10.1831 9.09999 9.82323 9.09999 9.39393V3.33333C9.09999 2.90403 8.94666 2.54419 8.63999 2.25378C8.33333 1.96338 7.95333 1.81818 7.49999 1.81818H1.89999V4.0909H6.69999V5.60606H3.49999V7.12121H6.69999V8.63636H1.89999Z" fill={color}/> </svg>);
    if (number === 4) return (<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fillRule="evenodd" clipRule="evenodd" d="M0.954543 10.2727L2.68182 16.3636C3.43939 16.3636 4.12878 16.1856 4.75 15.8295C5.37121 15.4735 5.90909 15.0455 6.36363 14.5455C6.81818 15.0455 7.35606 15.4735 7.97727 15.8295C8.59848 16.1856 9.27272 16.3636 10 16.3636C10.7273 16.3636 11.4015 16.1856 12.0227 15.8295C12.6439 15.4735 13.1818 15.0455 13.6364 14.5455C14.0909 15.0455 14.6288 15.4735 15.25 15.8295C15.8712 16.1856 16.5606 16.3636 17.3182 16.3636L19.0455 10.2727C19.0909 10.1061 19.0833 9.9053 19.0227 9.67045C18.9621 9.43561 18.7727 9.25758 18.4545 9.13636L17.2727 8.72727V4.54545C17.2727 4.04545 17.0947 3.61742 16.7386 3.26136C16.3826 2.9053 15.9545 2.72727 15.4545 2.72727H12.7273V0H7.27272V2.72727H4.54545C4.04545 2.72727 3.61742 2.9053 3.26136 3.26136C2.9053 3.61742 2.72727 4.04545 2.72727 4.54545V8.72727L1.54545 9.13636C1.27272 9.22727 1.09469 9.39394 1.01136 9.63636C0.928028 9.87879 0.909088 10.0909 0.954543 10.2727ZM0.909088 18.1818V20H2.72727C3.36363 20 3.98485 19.9242 4.59091 19.7727C5.19697 19.6212 5.78788 19.3939 6.36363 19.0909C6.93939 19.3939 7.53409 19.6212 8.14772 19.7727C8.76136 19.9242 9.37879 20 10 20C10.6212 20 11.2386 19.9242 11.8523 19.7727C12.4659 19.6212 13.0606 19.3939 13.6364 19.0909C14.2121 19.3939 14.803 19.6212 15.4091 19.7727C16.0151 19.9242 16.6364 20 17.2727 20H19.0909V18.1818H17.2727C16.6364 18.1818 16.0076 18.0833 15.3864 17.8864C14.7651 17.6894 14.1818 17.3939 13.6364 17C13.0909 17.3939 12.5076 17.6818 11.8864 17.8636C11.2651 18.0455 10.6364 18.1364 10 18.1364C9.36363 18.1364 8.73485 18.0455 8.11363 17.8636C7.49242 17.6818 6.90909 17.3939 6.36363 17C5.81818 17.3939 5.23485 17.6894 4.61363 17.8864C3.99242 18.0833 3.36363 18.1818 2.72727 18.1818H0.909088ZM15.4545 8.13636L10 6.36364L4.54545 8.13636V4.54545H15.4545V8.13636ZM12.4793 14.5455H10.7438V12.9545H7.27272V8.18182H9.00826V11.3636H10.7438V8.18182H12.4793V11.3636H13.6364V12.9545H12.4793V14.5455Z" fill={color}/> </svg>);
  }

  const textcolor = getTextColor(color)

  return (
    <div
      className={`flex w-4 h-4 flex-col justify-center items-center shrink-0 rounded-full text-xs font-bold`}
      style={{backgroundColor: color, color: modifyColor(color, textcolor === "white" ? 75 : -75)}}
    >
      {number}  
    </div>
  );
}

export default bingocellIcon;